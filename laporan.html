<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan Transaksi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Laporan Transaksi</h1>

        <!-- Filter -->
        <div class="mb-3">
            <label for="filterDate" class="form-label">Filter Berdasarkan Tanggal</label>
            <input type="date" id="filterDate" class="form-control">
        </div>

        <!-- Tabel Laporan -->
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>ID Transaksi</th>
                    <th>Pelanggan</th>
                    <th>Produk</th>
                    <th>Total Harga</th>
                    <th>Status Pembayaran</th>
                    <th>Tanggal</th>
                </tr>
            </thead>
            <tbody id="reportTable"></tbody>
        </table>
    </div>

    <script>
        const transactions = JSON.parse(localStorage.getItem("transactions")) || [];
        const reportTable = document.getElementById("reportTable");
        const filterDate = document.getElementById("filterDate");

        const renderReport = (filter = "") => {
            reportTable.innerHTML = "";

            const filteredTransactions = transactions.filter((transaction) =>
                transaction.date.includes(filter)
            );

            filteredTransactions.forEach((transaction) => {
                reportTable.innerHTML += `
                    <tr>
                        <td>${transaction.id}</td>
                        <td>${transaction.customer}</td>
                        <td>${transaction.productName}</td>
                        <td>Rp ${transaction.finalPrice.toLocaleString()}</td>
                        <td>${transaction.paymentStatus}</td>
                        <td>${transaction.date}</td>
                    </tr>`;
            });
        };

        filterDate.addEventListener("change", (e) => {
            renderReport(e.target.value);
        });

        renderReport();
    </script>
</body>
</html>
